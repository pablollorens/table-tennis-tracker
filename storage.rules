rules_version = '2';

service firebase.storage {
  match /b/{bucket}/o {
    // Player avatars
    match /avatars/{playerId}/{fileName} {
      // Allow read access to all avatars
      allow read: if true;

      // Allow create/update with size and type validation
      allow create, update: if request.resource.size < 10 * 1024 * 1024 // Max 10MB
                            && request.resource.contentType.matches('image/.*'); // Only images

      // Allow delete to any user
      // Note: Without Firebase Auth, we can't verify user identity
      // Consider this a known security limitation
      allow delete: if true;
    }
  }
}
